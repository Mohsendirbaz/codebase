
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Financial Analysis - Annual Cash Flows</title>
            <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
            <style>
            .plot-container {
    width: 50%;
    margin: 0 auto;
}
.button-grid {
    width: 50%;
    display: flex;
    justify-content: space-between;
    gap: 15px;
    margin: 15px auto;
    padding: 0 5px;
}
.button-grid button {
    flex: 1;
    padding: 8px 12px;
    font-size: 14px;
    white-space: nowrap;
    border: none;
    border-radius: 4px;
    background-color: #f8f9fa;
    color: #495057;
    transition: all 0.2s ease-in-out;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    cursor: pointer;
}
.button-grid button:hover {
    background-color: #e9ecef;
    transform: translateY(-1px);
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}
.button-grid button:active {
    transform: translateY(1px);
    box-shadow: 0 1px 2px rgba(0,0,0,0.1);
}
.button-grid button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
}
#plot {
    width: 100%;
    height: 500px;
}
            </style>
        </head>
        <body>
        <div class="plot-container">
            <div id="plot"></div>
            <div class="button-grid">
                <button id="fix-button" disabled>Press 1 to fix hover</button>
                <button id="release-button" disabled>Press 2 to release hover</button>
                <button id="global-reset-button">Global Reset</button>
            </div>
</div>
            <script type="text/javascript">
                const metric = 'Annual_Cash_Flows';
                const selected_versions = [1, 2, 3];
                const metrics_data = {"Annual_Cash_Flows": [[0, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10176, 7855], [0, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10176, 7855], [0, 13835, 13835, 13835, 13835, 13835, 13835, 13835, 9035, 9035, 9035, 9035, 9035, 9035, 9035, 9035, 9035, 9035, 9035, 7666, 6685]], "Annual_Revenues": [[0, 52615, 52615, 52615, 52615, 52615, 52615, 52615, 52615, 52615, 52615, 52615, 52615, 52615, 52615, 52615, 52615, 52615, 52615, 52615, 52615], [0, 52615, 52615, 52615, 52615, 52615, 52615, 52615, 52615, 52615, 52615, 52615, 52615, 52615, 52615, 52615, 52615, 52615, 52615, 52615, 52615], [0, 55835, 55835, 55835, 55835, 55835, 55835, 55835, 55835, 55835, 55835, 55835, 55835, 55835, 55835, 55835, 55835, 55835, 55835, 55835, 55835]], "Annual_Operating_Expenses": [[-200000, 42000, 42000, 42000, 42000, 42000, 42000, 42000, 42000, 42000, 42000, 42000, 42000, 42000, 42000, 42000, 42000, 42000, 42000, 42000, 42000], [-200000, 42000, 42000, 42000, 42000, 42000, 42000, 42000, 42000, 42000, 42000, 42000, 42000, 42000, 42000, 42000, 42000, 42000, 42000, 42000, 42000], [-200000, 42000, 42000, 42000, 42000, 42000, 42000, 42000, 46800, 46800, 46800, 46800, 46800, 46800, 46800, 46800, 46800, 46800, 46800, 46800, 46800]], "Loan_Repayment_Terms": [[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]], "Depreciation_Schedules": [[0, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 8930, 0], [0, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 10615, 8930, 0], [0, 13835, 13835, 13835, 13835, 13835, 13835, 13835, 9035, 9035, 9035, 9035, 9035, 9035, 9035, 9035, 9035, 9035, 9035, 3770, 0]], "State_Taxes": [[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 84, 530], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 84, 530], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 263, 451]], "Federal_Taxes": [[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 353, 2229], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 353, 2229], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1105, 1897]], "Cumulative_Cash_Flows": [[-200000, -189890, -179780, -169671, -159561, -149452, -139342, -129233, -119123, -109014, -98904, -88795, -78685, -68576, -58466, -48357, -38247, -28138, -18028, -8336, -855], [-200000, -189890, -179780, -169671, -159561, -149452, -139342, -129233, -119123, -109014, -98904, -88795, -78685, -68576, -58466, -48357, -38247, -28138, -18028, -8336, -855], [-200000, -186823, -173647, -160471, -147295, -134119, -120942, -107766, -99161, -90557, -81952, -73347, -64742, -56138, -47533, -38928, -30323, -21719, -13114, -5813, 554]]};
                const hover_texts = {"Annual_Cash_Flows": {"data": [["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab"], ["Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800"]], "active": [false, false, false]}, "Annual_Revenues": {"data": [["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab"], ["Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800"]], "active": [false, false, false]}, "Annual_Operating_Expenses": {"data": [["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab"], ["Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800"]], "active": [false, false, false]}, "Loan_Repayment_Terms": {"data": [["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab"], ["Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800"]], "active": [false, false, false]}, "Depreciation_Schedules": {"data": [["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab"], ["Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800"]], "active": [false, false, false]}, "State_Taxes": {"data": [["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab"], ["Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800"]], "active": [false, false, false]}, "Federal_Taxes": {"data": [["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab"], ["Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800"]], "active": [false, false, false]}, "Cumulative_Cash_Flows": {"data": [["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab", "Price: 4.7 ab<br>Price: 4.7 ab"], ["Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800", "Labor Cost: 28800"]], "active": [false, false, false]}};
                const traces_names = ["Annual Cash Flows - ", "Annual Cash Flows - ", "Annual Cash Flows - "];
                const version_colors = ["#ff0000", "#0000ff", "#ff6e31", "#00a600", "#12c9ca", "#8b00ff", "#9400D3", "#f215a5", "#ff1493"];
                let annotations = [];
                let hoverTextStatus = {};
                let currentHoverPoint = null;
                let traces = [];

                const marker_styles = [
                    { symbol: "circle", size: 6 },
                    { symbol: "square", size: 6 },
                    { symbol: "diamond", size: 6 },
                    { symbol: "cross", size: 6 },
                    { symbol: "triangle-up", size: 6 },
                    { symbol: "triangle-down", size: 6 },
                    { symbol: "pentagon", size: 6 },
                    { symbol: "hexagon", size: 6 }
                ];

                for (let vIdx = 0; vIdx < selected_versions.length; vIdx++) {
                    const version = selected_versions[vIdx];
                    traces.push({
                        x: Array.from({ length: metrics_data[metric][vIdx].length }, (_, i) => i + 1),
                        y: metrics_data[metric][vIdx],
                        type: 'scatter',
                        mode: 'lines+markers',
                        name: traces_names[vIdx],
                        text: hover_texts[metric]['data'][vIdx],
                        hoverinfo: 'text',
                        marker: { ...marker_styles[vIdx % marker_styles.length], color: version_colors[vIdx % version_colors.length] }
                    });
                }

                const layout = {
                    grid: { rows: 1, columns: 1, pattern: 'independent' },
                    hovermode: 'closest',
                    title: `Annual Cash Flows`,
                    annotations: [],
                };

                Plotly.newPlot('plot', traces, layout);

                document.getElementById('fix-button').disabled = false;
                document.getElementById('release-button').disabled = false;

                document.getElementById('plot').on('plotly_hover', function(eventData) {
                    currentHoverPoint = eventData.points[0];
                });

                function toggleHoverText(fix) {
                    if (currentHoverPoint !== null) {
                        const pointKey = `${currentHoverPoint.curveNumber}-${currentHoverPoint.pointIndex}`;
                        const color = version_colors[currentHoverPoint.curveNumber % version_colors.length];  // Get color for version

                        if (fix) {
                            hoverTextStatus[pointKey] = true;
                            const hoverAnnotation = {
                                x: currentHoverPoint.x,
                                y: currentHoverPoint.y,
                                text: `<span style="color:${color};">${currentHoverPoint.text}</span>`,  // Apply color to text
                                showarrow: true,
                                arrowhead: 5,
                                ax: 0,
                                ay: -70,
                                axref: 'pixel',
                                ayref: 'pixel'
                            };
                            annotations.push(hoverAnnotation);
                            Plotly.relayout('plot', { annotations });
                        } else {
                            hoverTextStatus[pointKey] = false;
                            annotations = annotations.filter(ann => ann.x !== currentHoverPoint.x || ann.y !== currentHoverPoint.y);
                            Plotly.relayout('plot', { annotations });
                        }
                    }
                }

                document.addEventListener('keydown', (event) => {
                    if (event.key === '1') {
                        toggleHoverText(true);
                    } else if (event.key === '2') {
                        toggleHoverText(false);
                    }
                });

                function globalReset() {
                    hoverTextStatus = {};
                    annotations = [];
                    Plotly.relayout('plot', { annotations: [] });
                }

                document.getElementById('global-reset-button').addEventListener('click', globalReset);
            </script>
        </body>
        </html>
        